<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>New Character</title>
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/w3-min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>
<body>
    <div class="w3-tab pale-purple">
        <a class="tab-item tablink" href="javascript:pagerender('pages/newchar_home.html', 'home')">General Info</a>
        <a class="tab-item tablink" href="javascript:pagerender('pages/newchar_info.html', 'info')">Character Info</a>
        <a class="tab-item tablink" href="javascript:pagerender('pages/newchar_appear.html', 'appearance')">Appearance</a>
        <a class="tab-item tablink" href="javascript:pagerender('pages/newchar_pers.html', 'personality')" >Personality</a>
        <a class="tab-item tablink" href="javascript:pagerender('pages/newchar_race.html', 'race')" >Race</a>
        <a id="omegalink" class="tab-item tablink" href="javascript:pagerender('pages/newchar_omega.html', 'omega')" style="display: none;">Omega Timeline</a>
        <a class="tab-item tablink" href="javascript:pagerender('pages/newchar_other.html', 'other')" >Other</a>
        <a class="tab-item tablink" href="javascript:pagerender('pages/newchar_settings.html', 'settings')" >Settings &amp; Options</a>
    </div>
    <div class="minipage" id="charpagebox"></div>
    <script type="text/javascript">
        window.onload = load_it();
        var currentPage = "home";
        var prevPage = "";
        const infoArray = [];
                
 
        function load_it() {
            jQuery(document).ready(function ($) {
                $("#charpagebox").load("pages/newchar_home.html");
            });
        }

        
        function pagerender(url, page) {
            prevPage = currentPage;
            currentPage = page;
            
            console.log(currentPage);
            console.log(prevPage);

            if(prevPage === "info"){
                getInfo();
            }
            
            if(currentPage === "info"){
                setInfo();
            }
            
            
            jQuery(document).ready(function ($) {
                $("#charpagebox").load(url);
            });
            
            if(infoArray[0] !== "" || ''){
                document.cookie = infoArray;
            }
            console.log(infoArray);
        }
        
        
        function getInfo(){
            jQuery(document).ready(function ($) {
                if(document.getElementById("charname").value !== null || ""){
                    infoArray[0] = document.getElementById("charname").value;
                } else { infoArray[0] = ""; }
                
                if(document.getElementById("charalias").value !== null || ""){
                    infoArray[1] = document.getElementById("charname").value;
                } else { infoArray[1] = ""; }
                
                if(document.getElementById("shortdesc").value !== null || ""){
                    infoArray[2] = document.getElementById("shortdesc").value;
                } else { infoArray[2] = ""; }
               
                if(document.getElementById("charage").value !== null || ""){
                    infoArray[3] = document.getElementById("charage").value;
                } else { infoArray[3] = ""; }

                if(document.getElementById("chargender").value !== null || ""){
                    infoArray[4] = document.getElementById("chargender").value;
                } else { infoArray[4] = ""; }
               
                if(document.getElementById("charrace").value !== null || ""){
                    infoArray[5] = document.getElementById("charrace").value;
                } else { infoarray[5] = ""; }
            });
        }
        
        
        function setInfo(){
            jQuery(document).ready(function ($) {
                if(infoArray[0] !== ""){
                    document.getElementById("charname").value = infoArray[0];
                }
            });
        }
    </script>
</body>